(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){class Component{constructor(str){this.element=$(`<${str}/>`)}render(){return this.element}}module.exports=Component},{}],2:[function(require,module,exports){const Component=require("../Component.js");const Loading=require("../Loading");class Content extends Component{constructor(url=""){super("div");this.element.addClass("site-content").attr("id","site-content");this.url=url;this.loadingScreen=new Loading;this.element.append(this.loadingScreen.render())}load(url,callback=(()=>{})){this.loadingScreen.show();fetch(url).then(res=>res.text()).then(text=>{this.element.html("").html(text);this.loadingScreen=new Loading;this.element.append(this.loadingScreen.render());callback()})}loadAsync(url){return new Promise(resolve=>{this.load(url,()=>{resolve()})})}}module.exports=Content},{"../Component.js":1,"../Loading":4}],3:[function(require,module,exports){const Component=require("../Component.js");class Link extends Component{constructor(text=""){super("a");this.clickEvent=[];this.element.addClass("nav-link").attr("href","#").text(text);this.element.on("click",e=>{for(const func of Array.from(this.clickEvent)){if(typeof func==="function"){func(e)}}})}onClick(func){this.clickEvent.push(func)}}module.exports=Link},{"../Component.js":1}],4:[function(require,module,exports){const Component=require("../Component.js");class Loading extends Component{constructor(){super("div");this.element.addClass("loading").attr("id","site-loading").hide();this.element.html(`\n        <div></div>\n        `)}show(){this.element.fadeIn(200)}hide(callback=(()=>{})){return new Promise(resolve=>{this.element.fadeOut(200,()=>{callback();resolve()})})}}module.exports=Loading},{"../Component.js":1}],5:[function(require,module,exports){const Component=require("../Component.js");const Link=require("../Link");class NavItem extends Component{constructor(title="",iconClass=""){super("li");this.link=new Link(`\t${title}`);this.link.element.prepend($("<i/>").addClass(iconClass));this.element.addClass("nav-item");this.element.append(this.link.render())}onClick(func){this.link.onClick(func)}}module.exports=NavItem},{"../Component.js":1,"../Link":3}],6:[function(require,module,exports){const Component=require("../Component.js");const SideBar=require("../Sidebar");const Content=require("../Content");const Setting=require("../../Setting");class Page extends Component{constructor(){super("div");this.element.addClass("site").attr("id","site");this.setting=new Setting;this.setting.load();this.element.addClass(this.setting.theme+" tile-bg");this.sideBar=new SideBar;this.content=new Content;this.element.append(this.sideBar.render());this.element.append(this.content.render());this.handleMenu()}handleMenu(){this.sideBar.menu.changeTheme.onClick(e=>{e.preventDefault();this.element.toggleClass("theme-dark");if(this.setting.theme!=="theme-dark"){this.setting.theme="theme-dark"}else{this.setting.theme=""}this.setting.save()});this.sideBar.menu.homePage.onClick(e=>{e.preventDefault();this.switchPage("home")});this.sideBar.menu.aboutPage.onClick(e=>{e.preventDefault();this.switchPage("about")});this.sideBar.menu.blogPage.onClick(e=>{e.preventDefault();this.switchPage("blog")})}switchPage(pageName){window.history.pushState("","",`/${pageName}`);this.rerender(pageName)}async rerender(pageName){const res=await this.content.loadAsync(`/page/${pageName}`);return res}}module.exports=Page},{"../../Setting":8,"../Component.js":1,"../Content":2,"../Sidebar":7}],7:[function(require,module,exports){const Component=require("../Component.js");const NavItem=require("../NavItem");class Sidebar extends Component{constructor(){super("ul");this.element.addClass("site-sidebar navbar-nav flex-column").attr("id","site-menu");this.menu={homePage:new NavItem("HOME","fas fa-home"),aboutPage:new NavItem("ABOUT","fas fa-info-circle"),blogPage:new NavItem("BLOG","fas fa-pen"),changeTheme:new NavItem("CHANGE THEME","fas fa-cog")};for(const navName of Object.keys(this.menu)){this.element.append(this.menu[navName].render())}}}module.exports=Sidebar},{"../Component.js":1,"../NavItem":5}],8:[function(require,module,exports){class Setting{load(){this.data=JSON.parse(localStorage.getItem("setting"))||{}}save(){localStorage.setItem("setting",JSON.stringify(this.data))}get theme(){return this.data.theme||""}set theme(theme){if(theme!=="theme-dark")this.data.theme="";else this.data.theme=theme}}module.exports=Setting},{}],9:[function(require,module,exports){const Router=require("./router");const Page=require("./Component/Page");(function afterLoad($){const router=new Router;const page=new Page("");const PAGE_LIST=["home","about","blog"];router.map("/",(req,res)=>{window.location="/home"});router.map("/:pagename",async(req,res)=>{const{params:{pagename:pagename}}=req;console.log(pagename);if(PAGE_LIST.includes(pagename)){page.rerender(pagename);res.end()}});router.map("/see-blog/:postName",(req,res)=>{page.rerender(`blog/${req.params.postName}/`);res.end()});router.map("/.*",(req,res)=>{res.render("404.html",req);res.end()});$(document).ready(()=>{let oldScroll=0;$(window).on("scroll",event=>{const newScroll=+$(document).scrollTop();if(newScroll>oldScroll){$(".site-sidebar").addClass("onscrolldown")}else{$(".site-sidebar").removeClass("onscrolldown")}oldScroll=newScroll});$("body").html("").append(page.render());router.ready()});window.addEventListener("popstate",()=>{router.ready()})})(jQuery)},{"./Component/Page":6,"./router":11}],10:[function(require,module,exports){class RouterRes{constructor(){this.isEnd=false}render(page,data){this.isEnd=true;fetch(`/page/${page}`).then(res=>res.text()).then(text=>{const varData=data||[];let textRendered=text;for(const key of Object.keys(varData)){textRendered=textRendered.replace(`{{${key}}}`,varData[key])}return textRendered}).then(text=>{$("body").html(text)})}end(){this.isEnd=true}}module.exports=RouterRes},{}],11:[function(require,module,exports){const RouterRes=require("./router-res");module.exports=class Router{constructor(){this.route=[];this.request={}}ready(){const url=new URL(window.location);const{searchParams:searchParams,pathname:pathname}=url;const search={};searchParams.forEach((val,key)=>{search[key]=val});this.request={url:url,params:{},search:search};this.response=new RouterRes;this.match(pathname)}map(path,callback){const regMatch=new function(){this.var=[];this.match_path=new RegExp(`^${path.replace(/(:)(\w+)/g,(full,dots,name)=>{this.var.push(name);return"([^\\/]+)"})}(?:(?:\\/$)|$)`);return this};this.route.push({path:path,regex:regMatch,callback:callback})}async match(path){for(const route of this.route){if(this.response.isEnd)break;const match=path.match(route.regex.match_path);if(match){for(let i=1;i<match.length;i+=1){this.request.params[route.regex.var[i-1]]=match[i]}await route.callback(this.request,this.response)}}}}},{"./router-res":10}]},{},[9]);
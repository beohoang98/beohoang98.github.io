<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>Noob Coder</title>
		<link rel="stylesheet" href="/css/home.css">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">

		<script src="/static/jquery/jquery-3.3.1.min.js"></script>
	</head>
	<body>
		<div class="home-header">
			<div>
				<h1 href="#">Noob Coder</h1>
				<p>Normal guy</p>
				<p>Web Developer trong tương lai</p>
				<p>Tò mò công nghệ</p>
				<p>Thích sự đơn giản</p>
			</div>
		</div>
		<div class="navbar">
	<div class="navbar-el">
		<a href="/" class="navbar-name">HOME</a>
	</div>
	<div class="navbar-logo">
		<i class="fab fa-github"></i>
	</div>
	<div class="navbar-el">
		<a class="navbar-name">CATEGORIES</a>
		<div class="navbar-sub">
			
			<a href="/category?name=web" class="navbar-name">Web</a>
			
		</div>
	</div>
</div>
		<div class="container">
			<style>
	.category-list {
		padding-left: 1em;
	}
	#category-name {
		padding: 5px 0.5em;
		background: var(--dark);
		color: var(--text-light);
		border-radius: 5px;
	}
</style>
<h1>CATEGORY: <span id='category-name'></span></h1>
<div class="category-list">

</div>
<script>
	const path = new URL(document.location.toString()).searchParams.get('name');
	let cat_name = "";

	if (!path) cat_name = "None";
	else cat_name = path;
	
	$('#category-name').text(cat_name);

	document.addEventListener('DOMContentLoaded', async()=>{
		const listDiv = $('.category-list');

		const res = await fetch('/api/postByCat');
		const json = await res.json().catch(err=>{
			console.log(err);
			json = [];
		});
		const data = json;
		if (!data.hasOwnProperty(cat_name)) {
			return;
		}
		
		for (const post of data[cat_name])
		{
			const postDiv = createPostDiv(post);
			listDiv.append(postDiv);
		}
	});

	function createPostDiv(post) {
		return $('<a/>').attr('href', post.url).addClass('home-post row')
		.html(`
			<div class="col-4">
				<div class='home-post-img'>
					<img class='res-img' src='${post.img}'/>
				</div>
			</div>
			<div class='col-8'>
				<div class='home-post-title'>${post.title}</div>
				<div class='home-post-date'>${ new Date(post.date).toLocaleDateString('vi-VN') }</div>
				<div class='home-post-author'>${post.author}</div>
				<div class='home-post-summary'>${post.summary}</div>
			</div>
		`);
	}
</script>
		</div>
		<div class="footer">
<div>
	<ul class='social'>
		<li>
			<a target="_blank" title="Github" href="//www.github.com/beohoang98">
				<i class="fab fa-github"></i>
			</a>
		</li>
		<li>
			<a target="_blank" title="Linkedin" href="//www.linkedin.com/in/an-hoang98">
				<i class="fab fa-linkedin"></i>
			</a>
		</li>
		<li>
			<a target="_blank" title="Facebook Profile" href="//www.facebook.com/beo.hoang395">
				<i class="fab fa-facebook"></i>
			</a>
		</li>
	</ul>
	<div>
		<a href="/myCV" target="_blank">MY RESUME</a>
	</div>
	<div>
		<p>Generated by Jekyll on Github Pages <span class="fab fa-github"></span></p>
		<p>I'm so lazy to design <em>colors</em> <span class="fas fa-meh"></span>! Greyscale is the fastest way</p>
	</div>
</div>
</div>
	</body>
</html>